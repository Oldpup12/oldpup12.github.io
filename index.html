<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Marcy Davis | Sculpture & Installation</title>

  <!-- Font: Playfair Display -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet" />

  <style>
    /* ---- Reset / Base ---- */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body {
      height: 100%;
      font-family: 'Playfair Display', serif;
      color: #f0f0f0;
      background-color: #111;
      background-image: radial-gradient(
        circle at center,
        rgba(241,194,125,0.07) 0%,
        rgba(10,35,10,0.15) 70%
      );
      background-size: 200% 200%;
      background-position: 20% 20%;
      background-repeat: no-repeat;
      transition: background-position 5s ease;
      overflow-x: hidden;
    }
    body:hover { background-position: 80% 80%; }

    /* ---- Views (client-side "pages") ---- */
    .view { display: none; }
    .view.active { display: block; }

    /* ---- Shared layout ---- */
    .container { display: flex; flex-direction: column; min-height: 100vh; }
    .main {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem 5rem;
      gap: 4rem;
    }
    .left { flex: 1; animation: fadeIn 1s ease forwards; }
    .right {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: fadeIn 1s ease forwards 0.5s;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .name {
      font-size: 3rem;
      margin-bottom: 4rem;
      opacity: 0;
      animation: fadeIn 1s ease forwards;
    }
    .bio {
      font-size: 1.225rem;
      line-height: 1.6;
      opacity: 0;
      animation: fadeIn 1s ease forwards 0.7s;
    }

    /* ---- Image (home) ---- */
    .image-placeholder {
      width: 585px;
      height: 780px;
      background: #222;
      border-radius: 1rem;
      overflow: hidden;
      transition: transform 0.6s ease;
    }
    .image-placeholder:hover { transform: scale(1.05); }
    .image-placeholder img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    /* ---- Footer (Contact) ---- */
    .footer { display: flex; justify-content: flex-end; gap: 2rem; padding: 1.5rem 2rem; }
    .contact a {
      display: flex;
      align-items: center;
      color: inherit;
      text-decoration: none;
      font-size: 1rem;
      transition: transform 0.15s ease, opacity 0.2s ease;
      opacity: 0.95;
    }
    .contact a:hover { transform: scale(1.04); opacity: 1; }
    .contact a img { width: 24px; height: 24px; margin-right: 0.5em; filter: invert(1); }
    .contact a img.email-icon { width: 21px; height: 21px; }

    /* ---- Nav Bar ---- */
    .top-nav {
      position: fixed;
      top: 1rem;
      left: 1.25rem;
      display: flex;
      gap: 1rem;
      padding: 0.5rem 0.75rem;
      border-radius: 999px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.12);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      z-index: 50;
      transition: background 0.5s ease, border-color 0.5s ease;
    }
    .top-nav:hover { background: rgba(255,255,255,0.12); border-color: rgba(255,255,255,0.22); }
    .top-nav a {
      color: #f0f0f0;
      text-decoration: none;
      font-family: 'Playfair Display', serif;
      font-size: 1.05rem;
      padding: 0.25rem 0.5rem;
      opacity: 0.95;
      transform: translateZ(0);
      transition: transform 0.15s ease, opacity 0.2s ease;
    }
    .top-nav a:hover { transform: scale(1.06); opacity: 1; }
    .top-nav a.active { text-decoration: underline; text-underline-offset: 4px; }
    .top-nav a.link-home { font-weight: 700; letter-spacing: 0.5px; }

    /* ---- ABOUT page ---- */
    .main.about {
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 2rem;
      padding-top: 5rem;
    }
    .about-image {
      width: min(780px, 90vw);
      aspect-ratio: 3 / 4;
      background: #222;
      border-radius: 1rem;
      box-shadow: 0 0 0 1px rgba(255,255,255,0.08) inset;
    }
    .section-title { font-size: 2rem; letter-spacing: 0.5px; }
    #about .section-title { margin-top: 3.0rem; }
    .about-text {
      max-width: 980px;
      margin: 0 auto;
      line-height: 1.75;
      font-size: 1.125rem;
      white-space: pre-line;
      opacity: 0.98;
    }
    .about-cta { margin-top: 1.5rem; font-size: 1.25rem; opacity: 0.98; }

    /* ---- CONTACT Page ---- */
    #contact-title .section-title { margin-top: 0.2rem; }
    .main.contact {
      flex-direction: column;
      gap: 1.25rem;
      padding-top: 6rem;
      text-align: center;
    }
    .contact-center { display: flex; flex-direction: column; align-items: center; gap: 1rem; }
    .contact-center .contact a { font-size: 1.25rem; }
    .contact-center .contact a img { width: 28px; height: 28px; }
    .contact-center .contact a img.email-icon { width: 24px; height: 24px; }

    /* ---- WORK Page ---- */
    .main.work {
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      gap: 2rem;
      padding-top: 6rem;
      padding-bottom: 2rem;
    }
    #work .section-title { margin-top: 0.2rem; }

    .work-wrapper {
      width: min(1100px, 92vw);
      display: flex;
      flex-direction: column;
      gap: 3rem;
    }

    /* Each year block: timeline column + artwork grid column */
    .work-year {
      display: grid;
      grid-template-columns: 140px 1fr;
      gap: 3rem;
      align-items: start;

      opacity: 0;
      transform: translateY(14px);
      transition: opacity 0.8s ease, transform 0.8s ease;
    }
    .work-year.in-view {
      opacity: 1;
      transform: translateY(0);
    }

    /* Timeline: year label ABOVE the line */
    .work-timeline-cell {
      position: relative;
      min-height: 100%;
      display: flex;
      justify-content: center; /* centers label + line */
    }

    .work-year-label {
      position: sticky;
      top: 5.75rem;            /* below fixed nav */
      font-size: 1.75rem;      /* bigger */
      letter-spacing: 0.6px;
      opacity: 0.94;
      line-height: 1.1;

      /* IMPORTANT: no visible background */
      background: transparent;
      padding: 0;
      border-radius: 0;
      z-index: 2;
      display: inline-block;
      text-align: center;
    }

    /* The vertical line starts BELOW the sticky label (JS sets --line-start) */
    .work-timeline-cell::before {
      content: "";
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      top: var(--line-start, 3.2rem);
      bottom: 0;
      width: 2px;
      background: rgba(255,255,255,0.25);
      border-radius: 2px;
      z-index: 0;
    }

    /* ---- Masonry (2 columns, stacked independently) ---- */
    .masonry-2col {
      display: flex;
      gap: 2rem;
      align-items: flex-start;
    }
    .masonry-col {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 2rem;
      min-width: 0;
    }

    /* Work cards */
    .work-card { display: block; color: inherit; text-decoration: none; }
    .work-media {
      background: #222;
      border-radius: 1rem;
      overflow: hidden;
      position: relative;
      box-shadow: 0 0 0 1px rgba(255,255,255,0.08) inset;
      transition: transform 0.6s ease;
    }
    .work-card:hover .work-media { transform: scale(1.05); }

    .work-media img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    .work-placeholder {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      color: rgba(255,255,255,0.55);
      font-size: 1.05rem;
      letter-spacing: 0.4px;
      text-align: center;
      padding: 1rem;
    }
    .work-size {
      position: absolute;
      right: 0.85rem;
      bottom: 0.75rem;
      font-size: 0.9rem;
      opacity: 0.9;
      background: rgba(0,0,0,0.35);
      padding: 0.2rem 0.45rem;
      border-radius: 0.55rem;
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
    }

    /* Simple aspect ratio helpers */
    .portrait { aspect-ratio: 3 / 4; }
    .square { aspect-ratio: 1 / 1; }
    .landscape { aspect-ratio: 4 / 3; }
    .wide { aspect-ratio: 16 / 9; }

    /* ---- Artwork detail overlay ---- */
    .work-detail-overlay {
      position: fixed;
      inset: 0;
      z-index: 40;               /* nav stays visible (nav is 50) */
      background: rgba(0,0,0,0.62);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);

      /* IMPORTANT: allow scrolling inside overlay */
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;

      opacity: 0;
      pointer-events: none;
      transition: opacity 0.35s ease;
    }
    .work-detail-overlay.open {
      opacity: 1;
      pointer-events: auto;
    }

    .work-detail-panel {
      width: min(1100px, 92vw);
      margin: 0 auto;
      padding: 6.25rem 0 3rem; /* content begins under nav */
      transform: translateY(14px);
      opacity: 0;
      transition: transform 0.35s ease, opacity 0.35s ease;
    }
    .work-detail-overlay.open .work-detail-panel {
      transform: translateY(0);
      opacity: 1;
    }

    .detail-header {
      width: 100%;
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 1.25rem;
      margin-bottom: 1.75rem;
    }
    .detail-text { max-width: 980px; }
    .detail-meta {
      font-size: 1.55rem;
      letter-spacing: 0.3px;
      opacity: 0.95;
      margin-bottom: 0.6rem;
    }
    .detail-desc {
      font-size: 1.05rem;
      line-height: 1.65;
      opacity: 0.88;
    }

    .detail-close {
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.14);
      color: #f0f0f0;
      border-radius: 999px;
      width: 44px;
      height: 44px;
      display: grid;
      place-items: center;
      cursor: pointer;
      transition: transform 0.15s ease, background 0.2s ease, border-color 0.2s ease;
      flex: 0 0 auto;
      margin-top: 0.1rem;
      font-size: 1.35rem;
      line-height: 1;
    }
    .detail-close:hover {
      transform: scale(1.06);
      background: rgba(255,255,255,0.12);
      border-color: rgba(255,255,255,0.22);
    }

    /* detail image blocks */
    .detail-media {
      background: #222;
      border-radius: 1rem;
      overflow: hidden;
      position: relative;
      box-shadow: 0 0 0 1px rgba(255,255,255,0.08) inset;
      transition: transform 0.6s ease;
    }
    .detail-media:hover { transform: scale(1.05); }
    .detail-media img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    .detail-placeholder {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      color: rgba(255,255,255,0.55);
      font-size: 1.05rem;
      letter-spacing: 0.4px;
      text-align: center;
      padding: 1rem;
    }

    /* lock background scroll while modal is open, preserve position */
    body.modal-open {
      position: fixed;
      width: 100%;
      overflow: hidden;
    }

    /* ---- Desktop footer ---- */
    @media (min-width: 769px) {
      .contact a { font-size: 1.25rem; }
      .contact a img { width: 28px; height: 28px; }
      .contact a img.email-icon { width: 21px; height: 21px; }
    }

    /* ---- Mobile ---- */
    @media (max-width: 768px) {
      .main { flex-direction: column; text-align: center; padding: 2rem; }
      .footer { flex-direction: column; gap: 1rem; align-items: flex-end; }
      .image-placeholder { width: 80%; height: auto; aspect-ratio: 3/4; }
      .contact a img { width: 20px; height: 20px; }
      .contact a img.email-icon { width: 18px; height: 18px; }

      .top-nav {
        left: 50%;
        transform: translateX(-50%);
        gap: 0.9rem;
        padding: 0.6rem 1rem;
        width: min(92vw, 640px);
        justify-content: center;
      }
      .top-nav a { font-size: 1rem; }

      .main.work { padding-top: 6.25rem; }

      .work-year { grid-template-columns: 98px 1fr; gap: 1.25rem; }
      .work-year-label { top: 6.25rem; font-size: 1.35rem; }

      /* masonry becomes single column on mobile */
      .masonry-2col { flex-direction: column; gap: 1.25rem; }
      .masonry-col { gap: 1.25rem; }

      .work-detail-panel { padding-top: 6.75rem; }
      .detail-meta { font-size: 1.35rem; }
    }

    /* reserve space under the fixed nav so content never sits underneath it on load (used on Home view) */
    .with-nav { padding-top: 5rem; }
    @media (max-width: 768px) { .with-nav { padding-top: 5.75rem; } }

    /* ---- Page text animations (About/Contact/Work) ---- */
    #about .section-title,
    #about .about-text,
    #about .about-cta,
    #contact .section-title,
    #contact .contact-center,
    #contact .contact-center .contact,
    #work .section-title,
    #work .work-wrapper {
      opacity: 0;
    }

    #about.animate .section-title { animation: fadeIn 0.8s ease forwards 0s; }
    #about.animate .about-text { animation: fadeIn 0.8s ease forwards 0.2s; }
    #about.animate .about-cta { animation: fadeIn 0.8s ease forwards 0.4s; }

    #contact.animate .section-title { animation: fadeIn 0.8s ease forwards 0s; }
    #contact.animate .contact-center { animation: fadeIn 0.8s ease forwards 0.15s; }
    #contact.animate .contact-center .contact:nth-child(1) { animation: fadeIn 0.8s ease forwards 0.3s; }
    #contact.animate .contact-center .contact:nth-child(2) { animation: fadeIn 0.8s ease forwards 0.45s; }

    #work.animate .section-title { animation: fadeIn 0.8s ease forwards 0s; }
    #work.animate .work-wrapper { animation: fadeIn 0.8s ease forwards 0.15s; }
  </style>
</head>

<body>
  <!-- NAV BAR -->
  <nav class="top-nav" aria-label="Primary">
    <a href="#home" class="link-home" aria-label="Home">MD</a>
    <a href="#work" class="link-work" aria-label="Work">Work</a>
    <a href="#about" class="link-about" aria-label="About Me">About</a>
    <a href="#contact" class="link-contact" aria-label="Contact Me">Contact</a>
  </nav>

  <!-- HOME -->
  <section id="home" class="view active" aria-labelledby="home-title">
    <div class="container with-nav">
      <div class="main">
        <div class="left">
          <h1 class="name" id="home-title">Marcy Davis</h1>
          <p class="bio">
            Marcy is a third-year MFA candidate in Sculpture at Texas Christian University. She earned her BFA with honors in Sculpture from the University of Texas at Arlington, with a minor in Glass.
          </p>
        </div>
        <div class="right">
          <div class="image-placeholder">
            <img src="images/marcy.png" alt="Marcy Davis" />
          </div>
        </div>
      </div>

      <div class="footer">
        <div class="contact">
          <a href="https://instagram.com/_mars_studio_" target="_blank" rel="noopener noreferrer">
            <img src="images/instagram.svg" alt="Instagram" />
            _mars_studio_
          </a>
        </div>
        <div class="contact">
          <a href="mailto:marcy.davis@tcu.edu">
            <img src="images/email.svg" alt="Email" class="email-icon" />
            [marcy.davis@tcu.edu](mailto:marcy.davis@tcu.edu)
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- WORK -->
  <section id="work" class="view" aria-labelledby="work-title">
    <div class="container">
      <div class="main work">
        <h2 class="section-title" id="work-title">Work</h2>

        <div class="work-wrapper" aria-label="Portfolio timeline">
          <!-- 2025 -->
          <div class="work-year" data-year="2025">
            <div class="work-timeline-cell" aria-hidden="true">
              <div class="work-year-label">2025</div>
            </div>

            <!-- masonry container: items start as direct children, JS will split into 2 columns -->
            <div class="masonry-2col work-grid" data-masonry="work-2025">
              <!-- cards (source items; JS will move them into columns) -->
              <a class="work-card" href="#" data-artwork="2025-1" aria-label="Open artwork: 2025 work 1">
                <div class="work-media portrait">
                  <div class="work-placeholder">Artwork 1 (placeholder)</div>
                  <div class="work-size">36 × 24 in</div>
                </div>
              </a>

              <a class="work-card" href="#" data-artwork="2025-2" aria-label="Open artwork: 2025 work 2">
                <div class="work-media square">
                  <div class="work-placeholder">Artwork 2 (placeholder)</div>
                  <div class="work-size">20 × 20 in</div>
                </div>
              </a>

              <a class="work-card" href="#" data-artwork="2025-3" aria-label="Open artwork: 2025 work 3">
                <div class="work-media landscape">
                  <div class="work-placeholder">Artwork 3 (placeholder)</div>
                  <div class="work-size">30 × 22 in</div>
                </div>
              </a>

              <a class="work-card" href="#" data-artwork="2025-4" aria-label="Open artwork: 2025 work 4">
                <div class="work-media wide">
                  <div class="work-placeholder">Artwork 4 (placeholder)</div>
                  <div class="work-size">48 × 27 in</div>
                </div>
              </a>
            </div>
          </div>

          <!-- 2024 -->
          <div class="work-year" data-year="2024">
            <div class="work-timeline-cell" aria-hidden="true">
              <div class="work-year-label">2024</div>
            </div>

            <div class="masonry-2col work-grid" data-masonry="work-2024">
              <a class="work-card" href="#" data-artwork="2024-1" aria-label="Open artwork: 2024 work 1">
                <div class="work-media portrait">
                  <div class="work-placeholder">Artwork 1 (placeholder)</div>
                  <div class="work-size">40 × 28 in</div>
                </div>
              </a>

              <a class="work-card" href="#" data-artwork="2024-2" aria-label="Open artwork: 2024 work 2">
                <div class="work-media landscape">
                  <div class="work-placeholder">Artwork 2 (placeholder)</div>
                  <div class="work-size">32 × 18 in</div>
                </div>
              </a>

              <a class="work-card" href="#" data-artwork="2024-3" aria-label="Open artwork: 2024 work 3">
                <div class="work-media square">
                  <div class="work-placeholder">Artwork 3 (placeholder)</div>
                  <div class="work-size">24 × 24 in</div>
                </div>
              </a>
            </div>
          </div>
        </div>

        <!-- Artwork Detail Overlay -->
        <div class="work-detail-overlay" id="workDetailOverlay" aria-hidden="true">
          <div class="work-detail-panel" role="dialog" aria-modal="true" aria-label="Artwork details">
            <div class="detail-header">
              <div class="detail-text">
                <div class="detail-meta" id="detailMeta">Title • Material • Size</div>
                <div class="detail-desc" id="detailDesc">
                  I am a description, and I am an art work. I am a nice artwork, so please like me.
                  I was made with love and care and you should be happy about me.
                </div>
              </div>

              <button class="detail-close" id="detailClose" aria-label="Close artwork view">×</button>
            </div>

            <!-- masonry-like detail grid (JS will split into columns) -->
            <div class="masonry-2col" id="detailGrid" aria-label="Artwork images"></div>
          </div>
        </div>
      </div>

      <!-- Footer present on WORK as well -->
      <div class="footer">
        <div class="contact">
          <a href="https://instagram.com/_mars_studio_" target="_blank" rel="noopener noreferrer">
            <img src="images/instagram.svg" alt="Instagram" />
            _mars_studio_
          </a>
        </div>
        <div class="contact">
          <a href="mailto:marcy.davis@tcu.edu">
            <img src="images/email.svg" alt="Email" class="email-icon" />
            [marcy.davis@tcu.edu](mailto:marcy.davis@tcu.edu)
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- ABOUT -->
  <section id="about" class="view" aria-labelledby="about-title">
    <div class="container">
      <div class="main about">
        <h2 class="section-title" id="about-title">Artist Statement</h2>
        <div class="about-text">
          A body is never just a body. It is a structure held by skin, pressed against walls, sinking into the weight of land—yet it is also a terrain, restless and alive with invisible life. In these crossings, edges collapse: flesh becomes landscape, and architecture breathes like a body. My work unfolds in this unsettled in-between, where body and structure, inside and outside, are never fixed apart.
          <br>In my practice, I warp the familiar until it becomes unrecognizable. Materials such as wax or felt masquerade as skin, wounds, or scars, yet remain unnamable, unstable. They slip between recognition and estrangement, provoking both attraction and unease. What matters is not the material itself, but the experience of not fully knowing.
          <br>Thus, the result is work that doesn’t offer answers but confronts boundaries—the ones between body and structure, self and environment, fascination and repulsion. My installations invite viewers to linger in that environment, to feel the body as architecture, and architecture as a body unraveling. My work is deliberate in keeping it at arm’s length in understanding- contributing to a sense of ambiguity that promotes the viewer to outwardly experience the unknown.
        </div>
        <p class="about-cta">For my cv / full portfolio, please contact me.</p>
      </div>

      <div class="footer">
        <div class="contact">
          <a href="https://instagram.com/_mars_studio_" target="_blank" rel="noopener noreferrer">
            <img src="images/instagram.svg" alt="Instagram" />
            _mars_studio_
          </a>
        </div>
        <div class="contact">
          <a href="mailto:marcy.davis@tcu.edu">
            <img src="images/email.svg" alt="Email" class="email-icon" />
            [marcy.davis@tcu.edu](mailto:marcy.davis@tcu.edu)
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="view" aria-labelledby="contact-title">
    <div class="container">
      <div class="main contact">
        <h2 class="section-title" id="contact-title">Contact</h2>
        <div class="contact-center">
          <div class="contact">
            <a href="https://instagram.com/_mars_studio_" target="_blank" rel="noopener noreferrer">
              <img src="images/instagram.svg" alt="Instagram" />
              _mars_studio_
            </a>
          </div>
          <div class="contact">
            <a href="mailto:marcy.davis@tcu.edu">
              <img src="images/email.svg" alt="Email" class="email-icon" />
              [marcy.davis@tcu.edu](mailto:marcy.davis@tcu.edu)
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script>
  (function () {
    // ----------------------------
    // Router
    // ----------------------------
    const views = ['home', 'work', 'about', 'contact'];
    const links = {
      home: document.querySelector('.link-home'),
      work: document.querySelector('.link-work'),
      about: document.querySelector('.link-about'),
      contact: document.querySelector('.link-contact'),
    };

    function setActiveLink(view) {
      Object.keys(links).forEach(key => {
        if (!links[key]) return;
        links[key].classList.toggle('active', view === key);
        links[key].setAttribute('aria-current', view === key ? 'page' : 'false');
      });
    }

    function showView(view) {
      window.scrollTo(0, 0);

      views.forEach(v => {
        const el = document.getElementById(v);
        if (!el) return;

        el.classList.toggle('active', v === view);

        if (v === view) {
          el.classList.remove('animate');
          void el.offsetWidth;
          el.classList.add('animate');
        } else {
          el.classList.remove('animate');
        }
      });

      setActiveLink(view);

      if (view === 'work') {
        requestAnimationFrame(() => {
          setupYearObserver();
          setupAllWorkMasonryOnce();
          updateAllTimelineLineStarts();
        });
      }
    }

    function route() {
      const hash = (location.hash || '').replace('#', '').toLowerCase();
      showView(views.includes(hash) ? hash : 'home');
    }

    window.addEventListener('hashchange', route);
    window.addEventListener('DOMContentLoaded', route);

    // ----------------------------
    // Work: animate each year on scroll
    // ----------------------------
    let yearObserver = null;

    function setupYearObserver() {
      const years = document.querySelectorAll('.work-year');
      if (!years.length) return;

      if (yearObserver) yearObserver.disconnect();

      yearObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('in-view');
            yearObserver.unobserve(entry.target);
          }
        });
      }, { threshold: 0.12, rootMargin: '0px 0px -12% 0px' });

      years.forEach(y => yearObserver.observe(y));
    }

    // ----------------------------
    // Masonry (FIXED): apply once, never clears out items accidentally
    // ----------------------------
    function applyMasonryOnce(container) {
      if (!container) return;
      if (container.dataset.masonryApplied === 'true') return;

      // Collect original items BEFORE we rewrite the container
      const items = Array.from(container.children);

      const colA = document.createElement('div');
      const colB = document.createElement('div');
      colA.className = 'masonry-col';
      colB.className = 'masonry-col';
      colA.setAttribute('data-col', '0');
      colB.setAttribute('data-col', '1');

      container.innerHTML = '';
      container.appendChild(colA);
      container.appendChild(colB);

      items.forEach((item, i) => {
        (i % 2 === 0 ? colA : colB).appendChild(item);
      });

      container.dataset.masonryApplied = 'true';
    }

    function setupAllWorkMasonryOnce() {
      document.querySelectorAll('.work-grid.masonry-2col').forEach(applyMasonryOnce);
    }

    // For detail grid we re-render each time, so we use a "rebuild" version:
    function applyMasonryRebuild(container) {
      if (!container) return;

      // If already has columns, pull items out of them first
      const existingCols = Array.from(container.querySelectorAll(':scope > .masonry-col'));
      let items = [];

      if (existingCols.length) {
        existingCols.forEach(col => items.push(...Array.from(col.children)));
      } else {
        items = Array.from(container.children);
      }

      const colA = document.createElement('div');
      const colB = document.createElement('div');
      colA.className = 'masonry-col';
      colB.className = 'masonry-col';
      colA.setAttribute('data-col', '0');
      colB.setAttribute('data-col', '1');

      container.innerHTML = '';
      container.appendChild(colA);
      container.appendChild(colB);

      items.forEach((item, i) => {
        (i % 2 === 0 ? colA : colB).appendChild(item);
      });
    }

    // ----------------------------
    // Timeline: line starts below sticky year label
    // ----------------------------
    function updateTimelineLineStartForCell(cell) {
      const label = cell.querySelector('.work-year-label');
      if (!label) return;

      const cellRect = cell.getBoundingClientRect();
      const labelRect = label.getBoundingClientRect();

      const start = Math.max(0, (labelRect.bottom - cellRect.top) + 10);
      cell.style.setProperty('--line-start', start + 'px');
    }

    function updateAllTimelineLineStarts() {
      document.querySelectorAll('.work-timeline-cell').forEach(updateTimelineLineStartForCell);
    }

    window.addEventListener('scroll', () => {
      const workView = document.getElementById('work');
      if (!workView || !workView.classList.contains('active')) return;
      updateAllTimelineLineStarts();
    }, { passive: true });

    window.addEventListener('resize', () => {
      const workView = document.getElementById('work');
      if (!workView || !workView.classList.contains('active')) return;
      updateAllTimelineLineStarts();
    });

    // ----------------------------
    // Work: detail overlay (keeps Work scroll state)
    // ----------------------------
    const overlay = document.getElementById('workDetailOverlay');
    const closeBtn = document.getElementById('detailClose');
    const detailMeta = document.getElementById('detailMeta');
    const detailDesc = document.getElementById('detailDesc');
    const detailGrid = document.getElementById('detailGrid');

    const ARTWORKS = {
      "2025-1": {
        title: "Work 1",
        material: "Wax, felt",
        size: "36 × 24 in",
        description: "I am a description, and I am an art work. I am a nice artwork, so please like me.",
        images: [
          { ratio: "portrait", label: "Image 1 (display image)" },
          { ratio: "portrait", label: "Image 2" },
          { ratio: "square", label: "Image 3" },
          { ratio: "square", label: "Image 4" },
        ]
      },
      "2025-2": {
        title: "Work 2",
        material: "Mixed media",
        size: "20 × 20 in",
        description: "This is a placeholder description that you can replace later.",
        images: [
          { ratio: "square", label: "Image 1 (display image)" },
          { ratio: "portrait", label: "Image 2" },
          { ratio: "landscape", label: "Image 3" },
          { ratio: "square", label: "Image 4" },
        ]
      },
      "2025-3": {
        title: "Work 3",
        material: "Found objects",
        size: "30 × 22 in",
        description: "This is a placeholder description that you can replace later.",
        images: [
          { ratio: "landscape", label: "Image 1 (display image)" },
          { ratio: "portrait", label: "Image 2" },
          { ratio: "portrait", label: "Image 3" },
          { ratio: "wide", label: "Image 4" },
        ]
      },
      "2025-4": {
        title: "Work 4",
        material: "Plaster, pigment",
        size: "48 × 27 in",
        description: "This is a placeholder description that you can replace later.",
        images: [
          { ratio: "wide", label: "Image 1 (display image)" },
          { ratio: "square", label: "Image 2" },
          { ratio: "landscape", label: "Image 3" },
          { ratio: "portrait", label: "Image 4" },
        ]
      },
      "2024-1": {
        title: "Work 1",
        material: "Mixed media",
        size: "40 × 28 in",
        description: "This is a placeholder description that you can replace later.",
        images: [
          { ratio: "portrait", label: "Image 1 (display image)" },
          { ratio: "portrait", label: "Image 2" },
          { ratio: "square", label: "Image 3" },
          { ratio: "landscape", label: "Image 4" },
        ]
      },
      "2024-2": {
        title: "Work 2",
        material: "Wax",
        size: "32 × 18 in",
        description: "This is a placeholder description that you can replace later.",
        images: [
          { ratio: "landscape", label: "Image 1 (display image)" },
          { ratio: "wide", label: "Image 2" },
          { ratio: "portrait", label: "Image 3" },
          { ratio: "square", label: "Image 4" },
        ]
      },
      "2024-3": {
        title: "Work 3",
        material: "Felt, thread",
        size: "24 × 24 in",
        description: "This is a placeholder description that you can replace later.",
        images: [
          { ratio: "square", label: "Image 1 (display image)" },
          { ratio: "square", label: "Image 2" },
          { ratio: "portrait", label: "Image 3" },
          { ratio: "landscape", label: "Image 4" },
        ]
      }
    };

    let savedScrollY = 0;

    function renderDetailImages(images) {
      if (!detailGrid) return;

      // Render as plain items first...
      detailGrid.innerHTML = images.map(img => {
        return `
          <div class="detail-media ${img.ratio}">
            <div class="detail-placeholder">${img.label}</div>
          </div>
        `;
      }).join('');

      // ...then split into 2 stacking columns
      applyMasonryRebuild(detailGrid);
    }

    function openDetail(artId) {
      const data = ARTWORKS[artId];
      if (!data || !overlay) return;

      savedScrollY = window.scrollY;
      document.body.classList.add('modal-open');
      document.body.style.top = `-${savedScrollY}px`;

      overlay.scrollTop = 0; // important: allow scrolling from top of overlay

      if (detailMeta) detailMeta.textContent = `${data.title} • ${data.material} • ${data.size}`;
      if (detailDesc) detailDesc.textContent = data.description;
      renderDetailImages(data.images);

      overlay.classList.add('open');
      overlay.setAttribute('aria-hidden', 'false');
    }

    function closeDetail() {
      if (!overlay) return;

      overlay.classList.remove('open');
      overlay.setAttribute('aria-hidden', 'true');

      window.setTimeout(() => {
        document.body.classList.remove('modal-open');
        const top = document.body.style.top;
        document.body.style.top = '';
        const restoreY = top ? Math.abs(parseInt(top, 10)) : savedScrollY;
        window.scrollTo(0, restoreY);
      }, 350);
    }

    document.addEventListener('click', (e) => {
      const card = e.target.closest('.work-card[data-artwork]');
      if (!card) return;

      e.preventDefault();
      openDetail(card.getAttribute('data-artwork'));
    });

    if (closeBtn) closeBtn.addEventListener('click', closeDetail);

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && overlay && overlay.classList.contains('open')) closeDetail();
    });

    // Initial setup
    window.addEventListener('DOMContentLoaded', () => {
      setupYearObserver();
      setupAllWorkMasonryOnce();
      updateAllTimelineLineStarts();
    });
  })();
</script>

</body>
</html>
